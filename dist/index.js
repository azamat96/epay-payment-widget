"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }var E=Object.defineProperty,T=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var d=(o,t,e)=>t in o?E(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,u=(o,t)=>{for(var e in t||(t={}))S.call(t,e)&&d(o,e,t[e]);if(k)for(var e of k(t))B.call(t,e)&&d(o,e,t[e]);return o},P=(o,t)=>T(o,_(t));var y=(o,t,e)=>new Promise((c,n)=>{var i=s=>{try{a(e.next(s))}catch(p){n(p)}},r=s=>{try{a(e.throw(s))}catch(p){n(p)}},a=s=>s.done?c(s.value):Promise.resolve(s.value).then(i,r);a((e=e.apply(o,t)).next())});var _react = require('react'); var _react2 = _interopRequireDefault(_react);function x(o,t){return y(this,null,function*(){let e=new FormData;for(let n in t)e.set(n,t[n]);return(yield fetch(o,{method:"POST",body:e})).json()})}function b(o,t,e,c,n="KZT",i={}){return P(u(u({},{backLink:"https://example.kz/success.html",failureBackLink:"https://example.kz/failure.html",postLink:"https://example.kz/",failurePostLink:"https://example.kz/order/1123/fail",language:"rus",description:"\u041E\u043F\u043B\u0430\u0442\u0430 \u0432 \u0438\u043D\u0442\u0435\u0440\u043D\u0435\u0442 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0435",accountId:"testuser1",name:"Arman Ali",data:'{"statement":{"name":"Arman     Ali","invoiceID":"80000016"}}'}),i),{auth:o,invoiceId:t,invoiceIdAlt:t,amount:e,terminal:c,currency:n})}function g(o){let t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src",o),document.getElementsByTagName("body")[0].appendChild(t)}var v="https://test-epay.homebank.kz/payform/payment-api.js",j="https://epay.homebank.kz/payform/payment-api.js",z="https://testoauth.homebank.kz/epay2/oauth2/token",A="https://epay-oauth.homebank.kz/oauth2/token",L="client_credentials",U="webapi usermanagement email_send verification statement statistics payment";var Q=({visible:o,clientId:t,clientSecret:e,invoiceId:c=""+new Date().valueOf(),amount:n,currency:i="KZT",paymentData:r={},terminalId:a,onWidgetClose:s,devMode:p=!1})=>{var m,h,l,f;if(_react.useEffect.call(void 0, ()=>{typeof halyk=="undefined"&&g(p?v:j)},[]),!o)return null;i=(m=r==null?void 0:r.currency)!=null?m:i;let R=(h=(r==null?void 0:r.invoiceId)||c)!=null?h:""+new Date().valueOf();return n=(l=r==null?void 0:r.amount)!=null?l:n,a=(f=r==null?void 0:r.terminal)!=null?f:a,x(p?z:A,{grant_type:L,scope:U,client_id:t,client_secret:e,invoiceID:c,amount:n,currency:i,terminal:a}).then(w=>{halyk.showPaymentWidget(b(w,R,n,a,i,r),s!=null?s:function(){})},()=>{alert("Authorization request failed")}),_react2.default.createElement(_react2.default.Fragment,null)};exports.EpayPaymentWidget = Q;
//# sourceMappingURL=index.js.map