"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }var B=Object.defineProperty,G=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var P=(o,t,e)=>t in o?B(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,u=(o,t)=>{for(var e in t||(t={}))K.call(t,e)&&P(o,e,t[e]);if(y)for(var e of y(t))S.call(t,e)&&P(o,e,t[e]);return o},x=(o,t)=>G(o,J(t));var b=(o,t,e)=>new Promise((c,n)=>{var i=s=>{try{a(e.next(s))}catch(p){n(p)}},r=s=>{try{a(e.throw(s))}catch(p){n(p)}},a=s=>s.done?c(s.value):Promise.resolve(s.value).then(i,r);a((e=e.apply(o,t)).next())});var _react = require('react'); var _react2 = _interopRequireDefault(_react);function g(o,t){return b(this,null,function*(){let e=new FormData;for(let n in t)e.set(n,t[n]);return(yield fetch(o,{method:"POST",body:e})).json()})}function v(o,t,e,c,n="KZT",i={}){return x(u(u({},{backLink:"https://example.kz/success.html",failureBackLink:"https://example.kz/failure.html",postLink:"https://example.kz/",failurePostLink:"https://example.kz/order/1123/fail",language:"rus",description:"\u041E\u043F\u043B\u0430\u0442\u0430 \u0432 \u0438\u043D\u0442\u0435\u0440\u043D\u0435\u0442 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0435",accountId:"testuser1",name:"Arman Ali",data:'{"statement":{"name":"Arman     Ali","invoiceID":"80000016"}}'}),i),{auth:o,invoiceId:t,invoiceIdAlt:t,amount:e,terminal:c,currency:n})}function j(o){let t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src",o),document.getElementsByTagName("body")[0].appendChild(t)}var z="https://test-epay.homebank.kz/payform/payment-api.js",A="https://epay.homebank.kz/payform/payment-api.js",L="https://testoauth.homebank.kz/epay2/oauth2/token",U="https://epay-oauth.homebank.kz/oauth2/token",w="client_credentials",O="webapi usermanagement email_send verification statement statistics payment";var q=({visible:o,clientId:t,clientSecret:e,invoiceId:c=""+new Date().valueOf(),amount:n,currency:i="KZT",paymentData:r={},terminalId:a,onWidgetClose:s,devMode:p=!1,oauthData:E})=>{var h,l,f,k;if(_react.useEffect.call(void 0, ()=>{typeof halyk=="undefined"&&j(p?z:A)},[]),!o)return null;i=(h=r==null?void 0:r.currency)!=null?h:i;let T=(l=(r==null?void 0:r.invoiceId)||c)!=null?l:""+new Date().valueOf();n=(f=r==null?void 0:r.amount)!=null?f:n,a=(k=r==null?void 0:r.terminal)!=null?k:a;let m=d=>{halyk.showPaymentWidget(v(d,T,n,a,i,r),s!=null?s:function(){})};return t&&e?g(p?L:U,{grant_type:w,scope:O,client_id:t,client_secret:e,invoiceID:c,amount:n,currency:i,terminal:a}).then(_=>m(_),()=>alert("Authorization request failed")):m(E),_react2.default.createElement(_react2.default.Fragment,null)},F= exports.default =q;exports.default = F;
//# sourceMappingURL=index.js.map